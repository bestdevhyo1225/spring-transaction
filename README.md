# Spring Transaction

## 트랜잭션 로그

```properties
logging.level.org.springframework.transaction.interceptor=TRACE
```

위의 로그를 추가하면, 트랜잭션 프록시가 호출하는 `트랜잭션의 시작` 과 `종료` 를 명확하게 로그로 확인할 수 있다.

## 트랜잭션 우선순위

**더 구체적이고, 자세한 것이 높은 우선순위를 가진다.** 따라서 클래스보다 메서드의 우선순위가 더 높다.

### @Transactional의 2가지 규칙

1. `우선순위 규칙`
2. `클래스에 적용하면, 메서드는 자동 적용`

### 인터페이스에 @Transactional 적용

1. 클래스의 메서드 (우선순위가 가장 높다.)
2. 클래스의 타입
3. 인터페이스의 메서드
4. 인터페이스의 타입 (우선수위가 가장 낮다.)

클래스의 메서드를 찾고, 없으면 클래스 타입을 찾고, 없으면 인터페이스의 메서드를 찾는다. 그래도 없으면 인터페이스의 타입을 찾는다.

인터페이스에 `@Transactional` 를 사용하는 것은 스프링 공식 메뉴얼에서 권장하지 않는 방법이다. **AOP를 적용하는 방식에 따라서 인터페이스의 AOP가 적용되지 않기 때문이다.**
가급적이면, **구체 클래스에 `@Transactional` 을 적용하자!**
